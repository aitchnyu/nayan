{% extends 'app/base.html' %}
{% load extratags %}
{% load static %}
{% block body %}
  <style>
    @media (max-width: 769px) {
      .columns-height {
        height: 80vh;
      }
    }
    @media not all and (max-width: 769px) {
      .columns-height {
        height: 100vh;
      }
      .scrollable-full-height-container {
        max-height: 100vh;
        overflow-y: scroll
      }
    }
  </style>
  <section class="columns">
    <div class="column px-0 pb-0 mb-0 columns-height">
      <div id="map-container" style="background-color: #e6e5e0; height: 100%; width: 100%">
        <div id="list-issues-map"></div>
      </div>
    </div>
    <div class="column scrollable-full-height-container">
      <h3 class="title is-3">Issues at location</h3>
      <div class="content">
          You may pan or zoom in/out the map and see issues within the enclosed area with 'Recenter Map'.
          You can click issues on the map or the list.
          You may report an issue too.
      </div>
      <div id="sidebar-stuff"></div>
      {% for issue in raw_data.issues %}
        <div class="pb-1">{{ issue.title }}</div>
      {% endfor %}
    </div>
  </section>
  <script type="text/javascript">
    function getMapDimensions() {
      const div = document.getElementById('map-container')
      return {width: div.clientWidth, height: div.clientHeight}
    }
    const rawData = {{ raw_data | encodejson }}
  </script>
  <script type="text/javascript" src="{% static 'app/webpack-dist/js/vendors-listissues.js' %}"></script>
  <script type="text/javascript" src="{% static 'app/webpack-dist/js/listissues.js' %}"></script>
{% endblock %}